(self.webpackChunkyacd=self.webpackChunkyacd||[]).push([[497],{9546:function(e,n,r){"use strict";r.r(n),r.d(n,{default:function(){return X}});r(82526),r(57327),r(54747),r(49337);var t=r(94949),a=r(90924),l=(r(47042),r(21249),r(67294)),s=r(64478),i=r(37100),c=r(6055),o=r(92669),u=r(81125),d=r(25904),p="_2drigWG08z",f="_3qy5-MPwaw",v="_1sbDIR8sCY",j="_1Hvw0QbyvH",b="_1L2FFnIs31",h=r(82569),y=r(68970),g=r(86010),x="_1-_dHqCZpQ",O="_3r9QGmDKef",m="_3iVnjLFlaM",w=r(85893);function P(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),r.push.apply(r,t)}return r}function C(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?P(Object(r),!0).forEach((function(n){(0,t.Z)(e,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):P(Object(r)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))}))}return e}function k(e){var n=e.OptionComponent,r=e.optionPropsList,t=e.selectedIndex,a=e.onChange,l=(0,g.Z)("visually-hidden",O),s=function(e){a(e.target.value)};return(0,w.jsx)("fieldset",{className:x,children:r.map((function(e,r){return(0,w.jsxs)("label",{children:[(0,w.jsx)("input",{type:"radio",checked:t===r,name:"selection",value:r,"aria-labelledby":"traffic chart type "+r,onChange:s,className:l}),(0,w.jsx)("div",{className:m,children:(0,w.jsx)(n,C({},e))})]},r)}))})}var N=r(85295),D=r(26512),Z=r(97148),E=r(66728),S=r(35227);function _(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),r.push.apply(r,t)}return r}function I(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?_(Object(r),!0).forEach((function(n){(0,t.Z)(e,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):_(Object(r)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))}))}return e}var A={legend:{display:!1},scales:{xAxes:[{display:!1}],yAxes:[{display:!1}]}},L=[23e3,35e3,46e3,33e3,9e4,68e3,23e3,45e3],M=[184e3,183e3,196e3,182e3,19e4,186e3,182e3,189e3],T=L;function G(e){var n=e.id,r=S.A8.read(),t=(0,l.useMemo)((function(){return{labels:T,datasets:[I(I(I({},S.IE),S.Eu[n].up),{},{data:L}),I(I(I({},S.IE),S.Eu[n].down),{},{data:M})]}}),[n]),a="chart-"+n;return(0,E.Z)(r,a,t,null,A),(0,w.jsx)("div",{style:{width:130,padding:5},children:(0,w.jsx)("canvas",{id:a})})}function $(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),r.push.apply(r,t)}return r}function R(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?$(Object(r),!0).forEach((function(n){(0,t.Z)(e,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):$(Object(r)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))}))}return e}var U=l.useEffect,H=l.useState,Q=l.useCallback,B=l.useRef,F=l.useMemo,W=[{id:0},{id:1},{id:2},{id:3}],Y=[{label:"Global",value:"Global"},{label:"Rule",value:"Rule"},{label:"Direct",value:"Direct"}],q=[{label:"Debug",value:"debug"},{label:"Warning",value:"warning"},{label:"Info",value:"info"},{label:"Error",value:"error"},{label:"Silent",value:"silent"}],z=[{key:"port",label:"HTTP Proxy Port"},{key:"socks-port",label:"SOCKS5 Proxy Port"},{key:"mixed-port",label:"Mixed Port"},{key:"redir-port",label:"Redir Port"}],K=[["zh","中文"],["en","English"]],V=(0,N.$j)((function(e){return{selectedChartStyleIndex:(0,c.AM)(e),latencyTestUrl:(0,c.Bg)(e),apiConfig:(0,c.Y$)(e)}}))((function(e){var n=e.dispatch,r=e.configs,t=e.selectedChartStyleIndex,l=e.latencyTestUrl,c=e.apiConfig,g=H(r),x=(0,a.Z)(g,2),O=x[0],m=x[1],P=B(r);U((function(){P.current!==r&&m(r),P.current=r}),[r]);var C=Q((function(){n((0,u.h7)("apiConfig"))}),[n]),E=Q((function(e,n){m(R(R({},O),{},{[e]:n}))}),[O]),S=Q((function(e){var r=e;E("allow-lan",r),n((0,o.wf)(c,{"allow-lan":r}))}),[c,n,E]),_=Q((function(e){var r=e.target,t=r.name,a=r.value;switch(r.name){case"mode":case"log-level":E(t,a),n((0,o.wf)(c,{[t]:a}));break;case"redir-port":case"socks-port":case"mixed-port":case"port":if(""!==r.value){var l=parseInt(r.value,10);if(l<0||l>65535)return}E(t,a);break;default:return}}),[c,n,E]),I=(0,N.WX)(),A=I.selectChartStyleIndex,L=I.updateAppConfig,M=Q((function(e){var r=e.target,t=r.name,a=r.value;switch(t){case"port":case"socks-port":case"mixed-port":case"redir-port":var l=parseInt(a,10);if(l<0||l>65535)return;n((0,o.wf)(c,{[t]:l}));break;case"latencyTestUrl":L(t,a);break;default:throw new Error(`unknown input name ${t}`)}}),[c,n,L]),T=F((function(){var e=O.mode;return"string"==typeof e&&e[0].toUpperCase()+e.slice(1)}),[O.mode]),$=(0,s.$)(),V=$.t,X=$.i18n;return(0,w.jsxs)("div",{children:[(0,w.jsx)(h.Z,{title:V("Config")}),(0,w.jsxs)("div",{className:p,children:[z.map((function(e){return void 0!==O[e.key]?(0,w.jsxs)("div",{children:[(0,w.jsx)("div",{className:j,children:e.label}),(0,w.jsx)(y.Z,{name:e.key,value:O[e.key],onChange:_,onBlur:M})]},e.key):null})),(0,w.jsxs)("div",{children:[(0,w.jsx)("div",{className:j,children:"Allow LAN"}),(0,w.jsx)(D.Z,{name:"allow-lan",checked:O["allow-lan"],onChange:S})]}),(0,w.jsxs)("div",{children:[(0,w.jsx)("div",{className:j,children:"Mode"}),(0,w.jsx)(Z.Z,{options:Y,name:"mode",value:T,onChange:_})]}),(0,w.jsxs)("div",{children:[(0,w.jsx)("div",{className:j,children:"Log Level"}),(0,w.jsx)(Z.Z,{options:q,name:"log-level",value:O["log-level"],onChange:_})]})]}),(0,w.jsx)("div",{className:v,children:(0,w.jsx)("div",{})}),(0,w.jsxs)("div",{className:f,children:[(0,w.jsxs)("div",{children:[(0,w.jsx)("div",{className:j,children:V("chart_style")}),(0,w.jsx)(k,{OptionComponent:G,optionPropsList:W,selectedIndex:t,onChange:A})]}),(0,w.jsxs)("div",{className:b,children:[(0,w.jsx)("div",{className:j,children:V("latency_test_url")}),(0,w.jsx)(y.N,{name:"latencyTestUrl",type:"text",value:l,onBlur:M})]}),(0,w.jsxs)("div",{children:[(0,w.jsx)("div",{className:j,children:"Action"}),(0,w.jsx)(d.Z,{label:"Switch backend",onClick:C})]}),(0,w.jsxs)("div",{children:[(0,w.jsx)("div",{className:j,children:V("lang")}),(0,w.jsx)("div",{className:b,children:(0,w.jsx)(i.Z,{options:K,selected:X.language,onChange:function(e){return X.changeLanguage(e.target.value)}})})]})]})]})})),X=(0,N.$j)((function(e){return{configs:(0,o.G_)(e),apiConfig:(0,c.Y$)(e)}}))((function(e){var n=e.dispatch,r=e.configs,t=e.apiConfig;return U((function(){n((0,o.Tj)(t))}),[n,t]),(0,w.jsx)(V,{configs:r})}))},37100:function(e,n,r){"use strict";r.d(n,{Z:function(){return s}});var t=r(90924),a=(r(21249),r(67294),"_2epoA7G8CQ"),l=r(85893);function s(e){var n=e.options,r=e.selected,s=e.onChange;return(0,l.jsx)("select",{className:a,value:r,onChange:s,children:n.map((function(e){var n=(0,t.Z)(e,2),r=n[0],a=n[1];return(0,l.jsx)("option",{value:r,children:a},r)}))})}}}]);
//# sourceMappingURL=config.c78db5bb1c3ab25a375e.js.map