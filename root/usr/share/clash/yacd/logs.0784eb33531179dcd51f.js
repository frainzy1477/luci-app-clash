(self.webpackChunkyacd=self.webpackChunkyacd||[]).push([[507],{77098:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return ae}});r(82526),r(57327),r(54747),r(49337);var n=r(90924),o=r(94949),i=r(86010),c=r(67294),s=r(64478),a=r(69834),l=(r(41539),r(39714),r(23123),r(88674),r(97943));function u(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function f(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?u(Object(r),!0).forEach((function(t){(0,o.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):u(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var d,v,g,h="/logs",p=new TextDecoder("utf-8"),b=!1,y=!1,j="";function O(e,t){var r;try{r=JSON.parse(e)}catch(t){console.log("JSON.parse error",JSON.parse(e))}var n=new Date,o=n.toLocaleString("zh-Hans");r.time=o,r.id=+n-0+Math.floor(65536*(1+Math.random())).toString(16),r.even=b=!b,t(r)}function m(e,t){return e.read().then((function(r){for(var n=r.done,o=r.value,i=p.decode(o,{stream:!n}),c=(j+=i).split("\n"),s=c[c.length-1],a=0;a<c.length-1;a++)O(c[a],t);return n?(O(s,t),j="",console.log("GET /logs streaming done"),void(y=!1)):(j=s,m(e,t))}))}function w(e,t){if(!y&&1!==g){g=1;var r=(0,l.P)(e,h),n=new WebSocket(r);n.addEventListener("error",(function(){return g=3})),n.addEventListener("close",(function(r){g=3,function(e,t){if(!v||d.baseURL===e.baseURL&&d.secret===e.secret&&d.logLevel===e.logLevel){if(y)return}else v.abort();y=!0,d=f({},e);var r=(v=new AbortController).signal,n=(0,l.g)(e),o=n.url,i=n.init;fetch(o+h+"?level="+e.logLevel,f(f({},i),{},{signal:r})).then((function(e){m(e.body.getReader(),t)}),(function(e){y=!1,r.aborted||console.log("GET /logs error:",e.message)}))}(e,t)})),n.addEventListener("message",(function(e){O(e.data,t)}))}}var x=r(87462),P=r(6055),S=r(92669),L=r(49522),k=r(82569),E="_3rlaagQhmO",N="_1Y8l2FW3db",C="_3RhnPkHfE2",D="o1S9cV4T0R",Z="_3GIdCSyyS7",_="lUDfnPiNdD",T="PaFzglKCf5",R="_29b6nIu_GY",z=r(79481),Y=r(45697),H=r.n(Y);function I(){return(I=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function U(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}var G=(0,c.forwardRef)((function(e,t){var r=e.color,n=void 0===r?"currentColor":r,o=e.size,i=void 0===o?24:o,s=U(e,["color","size"]);return c.createElement("svg",I({ref:t,xmlns:"http://www.w3.org/2000/svg",width:i,height:i,viewBox:"0 0 24 24",fill:"none",stroke:n,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},s),c.createElement("circle",{cx:"11",cy:"11",r:"8"}),c.createElement("line",{x1:"21",y1:"21",x2:"16.65",y2:"16.65"}))}));G.propTypes={color:H().string,size:H().oneOfType([H().string,H().number])},G.displayName="Search";var J=G,Q="_2QPZldYe9U",$="_2PCUI90lIf",B="xOYTLnYrng",K="_1JKQs_Qawx",M="_2km92h_dfH",W=r(85893);var A=function(e){var t=e.dispatch,r=e.searchText,o=e.updateSearchText,i=(0,c.useState)(r),s=(0,n.Z)(i,2),a=s[0],l=s[1],u=(0,c.useCallback)((function(e){t(o(e))}),[t,o]),f=(0,c.useMemo)((function(){return(0,z.Z)(u,300)}),[u]);return(0,W.jsx)("div",{className:Q,children:(0,W.jsxs)("div",{className:$,children:[(0,W.jsx)("div",{className:B,children:(0,W.jsx)("input",{type:"text",value:a,onChange:function(e){l(e.target.value),f(e.target.value)},className:K})}),(0,W.jsx)("div",{className:M,children:(0,W.jsx)(J,{size:20})})]})})},F=r(85295),V=(0,F.$j)((function(e){return{searchText:(0,L.Rv)(e),updateSearchText:L.AR}}))(A),X=r(4541);function q(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ee(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?q(Object(r),!0).forEach((function(t){(0,o.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):q(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var te=c.useCallback,re=c.memo,ne=c.useEffect,oe={debug:"none",info:"#454545",warning:"#b99105",error:"#c11c1c"};function ie(e){var t=e.time,r=e.even,n=e.payload,o=e.type,c=(0,i.Z)({even:r},_);return(0,W.jsx)("div",{className:c,children:(0,W.jsxs)("div",{className:E,children:[(0,W.jsx)("div",{className:C,children:t}),(0,W.jsx)("div",{className:N,style:{backgroundColor:oe[o]},children:o}),(0,W.jsx)("div",{className:D,children:n})]})})}function ce(e,t){return t[e].id}var se=re((function(e){var t=e.index,r=e.style,n=e.data[t];return(0,W.jsx)("div",{style:r,children:(0,W.jsx)(ie,ee({},n))})}),a.wy);var ae=(0,F.$j)((function(e){return{logs:(0,L.Xs)(e),logLevel:(0,S.ZO)(e),apiConfig:(0,P.Y$)(e)}}))((function(e){var t=e.dispatch,r=e.logLevel,o=e.apiConfig,i=e.logs,c=te((function(e){t((0,L.TH)(e))}),[t]);ne((function(){w(ee(ee({},o),{},{logLevel:r}),c)}),[o,r,c]);var l=(0,x.Z)(),u=(0,n.Z)(l,2),f=u[0],d=u[1],v=(0,s.$)().t;return(0,W.jsxs)("div",{children:[(0,W.jsx)(k.Z,{title:v("Logs")}),(0,W.jsx)(V,{}),(0,W.jsx)("div",{ref:f,style:{paddingBottom:30},children:0===i.length?(0,W.jsxs)("div",{className:T,style:{height:d-30},children:[(0,W.jsx)("div",{className:R,children:(0,W.jsx)(X.Z,{width:200,height:200})}),(0,W.jsx)("div",{children:v("no_logs")})]}):(0,W.jsx)("div",{className:Z,children:(0,W.jsx)(a.t7,{height:d-30,width:"100%",itemCount:i.length,itemSize:80,itemData:i,itemKey:ce,children:se})})})]})}))},87462:function(e,t,r){"use strict";r.d(t,{Z:function(){return l}});var n=r(90924),o=r(67294),i=o.useState,c=o.useRef,s=o.useCallback,a=o.useLayoutEffect;function l(){var e=c(null),t=i(200),r=(0,n.Z)(t,2),o=r[0],l=r[1],u=s((function(){var t=e.current.getBoundingClientRect().top;l(window.innerHeight-t)}),[]);return a((function(){return u(),window.addEventListener("resize",u),function(){window.removeEventListener("resize",u)}}),[u]),[e,o]}}}]);
//# sourceMappingURL=logs.0784eb33531179dcd51f.js.map